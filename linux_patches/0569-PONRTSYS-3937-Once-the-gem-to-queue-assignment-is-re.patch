From cc28fa5aca6b031bb07886beab5b90dadd8c37f7 Mon Sep 17 00:00:00 2001
From: ghoshp <purnendu.ghosh@intel.com>
Date: Thu, 2 May 2019 17:58:40 +0530
Subject: [PATCH] PONRTSYS-3937: Once the gem to queue assignment is removed,
 map the subif to drop queue

---
 drivers/net/ethernet/lantiq/datapath/gswip31/datapath_ppv4_api.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_ppv4_api.c b/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_ppv4_api.c
index 88bbe5524e37..184c770a4201 100644
--- a/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_ppv4_api.c
+++ b/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_ppv4_api.c
@@ -3991,7 +3991,7 @@ int dp_queue_map_set_31(struct dp_queue_map_set *cfg, int flag)
 		PR_ERR("Invalid Queue ID:%d\n", cfg->q_id);
 		return DP_FAILURE;
 	}
-	if (priv->qos_queue_stat[cfg->q_id].flag == PP_NODE_FREE) {
+	if ((priv->qos_queue_stat[cfg->q_id].flag == PP_NODE_FREE)  && (cfg->q_id != priv->ppv4_drop_q)) {
 		PR_ERR("Invalid Queue flag:%d\n",
 		       priv->qos_queue_stat[cfg->q_id].flag);
 		return DP_FAILURE;
