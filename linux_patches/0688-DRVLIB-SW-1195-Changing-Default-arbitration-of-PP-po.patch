From 780eb1f8b9116f827eca49acde5f78b4848970e6 Mon Sep 17 00:00:00 2001
From: Rekha Eswaran <rekha.eswaran@intel.com>
Date: Wed, 17 Jul 2019 13:48:58 +0800
Subject: [PATCH] DRVLIB_SW-1195 Changing Default arbitration of PP port to WSP

---
 drivers/net/datapath/dpm/gswip31/datapath_ppv4.c     | 4 ++--
 drivers/net/datapath/dpm/gswip31/datapath_ppv4_api.c | 2 +-
 drivers/net/datapath/dpm/gswip32/datapath_ppv4.c     | 4 ++--
 drivers/net/datapath/dpm/gswip32/datapath_ppv4_api.c | 2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/datapath/dpm/gswip31/datapath_ppv4.c b/drivers/net/datapath/dpm/gswip31/datapath_ppv4.c
index a6fc08e1c029..711f9f917b46 100644
--- a/drivers/net/datapath/dpm/gswip31/datapath_ppv4.c
+++ b/drivers/net/datapath/dpm/gswip31/datapath_ppv4.c
@@ -580,7 +580,7 @@ int dp_pp_alloc_port(struct ppv4_port *info)
 		 info->cqm_deq_port, qos_p_id);
 
 	qos_port_conf_set_default(&conf);
-	conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 	conf.ring_address = (void *)info->tx_ring_addr;
 	conf.ring_size = info->tx_ring_size;
 	conf.packet_credit_enable = 1;
@@ -752,7 +752,7 @@ int init_ppv4_qos(int inst, int flag)
 		goto EXIT;
 	}
 	qos_port_conf_set_default(&t->p_conf);
-	t->p_conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	t->p_conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 	t->p_conf.ring_address =
 	(void *)dp_deq_port_tbl[inst][idx].txpush_addr_qos;
 	t->p_conf.ring_size = dp_deq_port_tbl[inst][idx].tx_ring_size;
diff --git a/drivers/net/datapath/dpm/gswip31/datapath_ppv4_api.c b/drivers/net/datapath/dpm/gswip31/datapath_ppv4_api.c
index ede5e48009d4..48abdb342413 100644
--- a/drivers/net/datapath/dpm/gswip31/datapath_ppv4_api.c
+++ b/drivers/net/datapath/dpm/gswip31/datapath_ppv4_api.c
@@ -1358,7 +1358,7 @@ static int dp_alloc_qos_port(struct dp_node_alloc *node, int flag)
 	port_cfg.credit = dp_deq_port_tbl[inst][cqm_deq_port].tx_pkt_credit;
 	if (port_cfg.credit)
 		port_cfg.packet_credit_enable = 1;
-	port_cfg.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	port_cfg.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 #if IS_ENABLED(CONFIG_INTEL_DATAPATH_DBG)
 	if (unlikely(dp_dbg_flag & DP_DBG_FLAG_QOS)) {
 		DP_DEBUG(DP_DBG_FLAG_QOS, "qos_port_set parameter: %d/%d\n",
diff --git a/drivers/net/datapath/dpm/gswip32/datapath_ppv4.c b/drivers/net/datapath/dpm/gswip32/datapath_ppv4.c
index 456e886939fc..58312446b3c8 100644
--- a/drivers/net/datapath/dpm/gswip32/datapath_ppv4.c
+++ b/drivers/net/datapath/dpm/gswip32/datapath_ppv4.c
@@ -349,7 +349,7 @@ int dp_pp_alloc_port_32(struct ppv4_port *info)
 		 info->cqm_deq_port, qos_p_id);
 
 	qos_port_conf_set_default_32(&conf);
-	conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 	conf.ring_address = (unsigned long)info->tx_ring_addr_push;
 	conf.ring_size = info->tx_ring_size;
 	conf.packet_credit_enable = 1;
@@ -508,7 +508,7 @@ int init_ppv4_qos_32(int inst, int flag)
 		goto EXIT;
 	}
 	qos_port_conf_set_default_32(&t->p_conf);
-	t->p_conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	t->p_conf.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 	t->p_conf.ring_address =
 	(unsigned long)dp_deq_port_tbl[inst][idx].txpush_addr_qos;
 	t->p_conf.ring_size = dp_deq_port_tbl[inst][idx].tx_ring_size;
diff --git a/drivers/net/datapath/dpm/gswip32/datapath_ppv4_api.c b/drivers/net/datapath/dpm/gswip32/datapath_ppv4_api.c
index 3326dd346d66..f32806242604 100644
--- a/drivers/net/datapath/dpm/gswip32/datapath_ppv4_api.c
+++ b/drivers/net/datapath/dpm/gswip32/datapath_ppv4_api.c
@@ -1396,7 +1396,7 @@ static int dp_alloc_qos_port(struct dp_node_alloc *node, int flag)
 	port_cfg.credit = dp_deq_port_tbl[inst][cqm_deq_port].tx_pkt_credit;
 	if (port_cfg.credit)
 		port_cfg.packet_credit_enable = 1;
-	port_cfg.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WRR;
+	port_cfg.port_parent_prop.arbitration = PP_QOS_ARBITRATION_WSP;
 #if IS_ENABLED(CONFIG_INTEL_DATAPATH_DBG)
 	if (unlikely(dp_dbg_flag & DP_DBG_FLAG_QOS)) {
 		DP_DEBUG(DP_DBG_FLAG_QOS, "qos_port_set_32 parameter: %d/%d\n",
