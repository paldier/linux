From 4e6132dae409ec53e367de66c2d7064620b55b59 Mon Sep 17 00:00:00 2001
From: arathinx <ayyappanx.rathinam@intel.com>
Date: Wed, 20 Feb 2019 13:23:38 +0800
Subject: [PATCH] DRVLIB_SW-1323: Fix pin reserve empty cause last group pins
 reserved issue

---
 drivers/pinctrl/pinctrl-equilibrium.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/pinctrl/pinctrl-equilibrium.c b/drivers/pinctrl/pinctrl-equilibrium.c
index 47d4a77f13d6..0f9c315f990e 100644
--- a/drivers/pinctrl/pinctrl-equilibrium.c
+++ b/drivers/pinctrl/pinctrl-equilibrium.c
@@ -1458,9 +1458,11 @@ static void pinctrl_reseve_pins(struct intel_pinctrl_drv_data *drvdata)
 	int i;
 
 	for (i = 0; i < drvdata->nr_grps; i++) {
-		group = &drvdata->pin_grps[i];
-		if (strcmp(group->name, RESERVE_PINGROUP_NAME) == 0)
+		if (strcmp(drvdata->pin_grps[i].name,
+			   RESERVE_PINGROUP_NAME) == 0) {
+			group = &drvdata->pin_grps[i];
 			break;
+		}
 	}
 
 	if (!group)
