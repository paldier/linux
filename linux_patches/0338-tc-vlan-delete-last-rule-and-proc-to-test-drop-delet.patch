From 889336bc033f3351b30075d3fecfc753c07faadc Mon Sep 17 00:00:00 2001
From: Rekha Eswaran <rekha.eswaran@intel.com>
Date: Mon, 5 Nov 2018 13:59:33 +0800
Subject: [PATCH] tc vlan delete last rule and proc to test drop, delete rules
 are added at DP

---
 drivers/net/ethernet/lantiq/datapath/datapath_proc.c | 2 +-
 include/net/datapath_api_vlan.h                      | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_proc.c b/drivers/net/ethernet/lantiq/datapath/datapath_proc.c
index 0fc4d99a4b73..436093c4f613 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_proc.c
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_proc.c
@@ -1224,7 +1224,7 @@ static int proc_asym_vlan(struct file *file, const char *buf, size_t count,
 		PR_INFO("Desc:pattern match = TRUE (vid match) , with action");
 		PR_INFO("forward vid 74 and drop other VLAN tag\n");
 		PR_INFO("Output:Enqueued pkt recv for vid 74 other vid drop\n");
-		set_dev(&vlan, dev, ctp, dir, 1, 2, 2, mcast);
+		set_dev(&vlan, dev, ctp, dir, 0, 2, 2, mcast);
 		vlan1_list[0].def = 1; /* default rule */
 		vlan1_list[1].def = 0;
 		vlan.vlan1_list = vlan1_list;
diff --git a/include/net/datapath_api_vlan.h b/include/net/datapath_api_vlan.h
index 5185215ef492..64dae7ed0ecb 100644
--- a/include/net/datapath_api_vlan.h
+++ b/include/net/datapath_api_vlan.h
@@ -92,8 +92,8 @@ struct dp_act_vlan {
 				*/
 };
 
-struct dp_vlan0 {
 #define DP_VLAN_DEF_RULE 1
+struct dp_vlan0 {
 	int def;		/* default rule for untagged packet */
 	struct dp_pattern_vlan outer;	/* match pattern.
 					 * only proto is valid for this case
