From 3410e8c296c36303c9199596d0583af36aa92125 Mon Sep 17 00:00:00 2001
From: anishkhx <anishx.khurana@intel.com>
Date: Thu, 26 Jul 2018 14:10:19 +0800
Subject: [PATCH] DRVLIB_SW-778 : dp changes for dev_ops (ethtool and netdev
 ops)fix for CI build error

---
 drivers/net/ethernet/lantiq/datapath/datapath_ioctl.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_ioctl.c b/drivers/net/ethernet/lantiq/datapath/datapath_ioctl.c
index e383c7673147..7e75fe128898 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_ioctl.c
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_ioctl.c
@@ -153,10 +153,12 @@ int dp_ops_reset(struct dp_dev *dp_dev,
 		dev->ethtool_ops = dp_dev->old_ethtool_ops;
 		dp_dev->old_ethtool_ops = NULL;
 	}
+#if IS_ENABLED(CONFIG_LTQ_DATAPATH_SWITCHDEV)
 	if (dev->switchdev_ops == &dp_dev->new_swdev_ops) {
 		dev->switchdev_ops = dp_dev->old_swdev_ops;
 		dp_dev->old_swdev_ops = NULL;
 	}
+#endif
 	return DP_SUCCESS;
 }
 
