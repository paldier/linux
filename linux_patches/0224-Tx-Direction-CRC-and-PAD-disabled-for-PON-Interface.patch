From e0af4d1ec5c01718c3929629a97d45ea94762beb Mon Sep 17 00:00:00 2001
From: thampan <joby.thampan@intel.com>
Date: Mon, 13 Aug 2018 11:39:36 +0800
Subject: [PATCH] Tx Direction, CRC and PAD disabled for PON Interface

---
 drivers/net/ethernet/lantiq/datapath/gswip31/datapath_misc.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_misc.c b/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_misc.c
index ab6455c1d396..e3817399f36b 100644
--- a/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_misc.c
+++ b/drivers/net/ethernet/lantiq/datapath/gswip31/datapath_misc.c
@@ -790,8 +790,6 @@ static int pon_config(int inst, int ep, struct dp_port_data *data, u32 flags)
 	cpu_port_cfg.nPortId = ep;
 	cpu_port_cfg.bSpecialTagIngress = 1;
 	cpu_port_cfg.bSpecialTagEgress = 1;
-	/* Padding should be disabled for PON Interface */
-	cpu_port_cfg.bFcsTxOps = GSW_CRC_EN_PAD_DIS;
 	ret = gsw_core_api((dp_gsw_cb)gsw_handle->gsw_common_ops.CPU_PortCfgSet,
 			   gsw_handle, &cpu_port_cfg);
 	if (ret != GSW_statusOk) {
@@ -802,9 +800,9 @@ static int pon_config(int inst, int ep, struct dp_port_data *data, u32 flags)
 	/* Disable Rx CRC check. Value '0'-enable, '1'-disable */
 	mac_ops->set_rx_crccheck(mac_ops, DP_GSWIP_CRC_DISABLE);
 
-	/* TX FCS generation disable. Value '1'-enable, '0'-disable */
+	/* TX FCS generation disable, Padding Insertion disable. */
 	if (data->flag_ops & DP_F_DATA_FCS_DISABLE)
-		mac_ops->set_fcsgen(mac_ops, DP_GSWIP_FCS_DISABLE);
+		mac_ops->set_fcsgen(mac_ops, GSW_CRC_PAD_INS_DIS);
 
 	/* Disables RX/TX Flow control */
 	mac_ops->set_flow_ctl(mac_ops, DP_GSWIP_FLOW_CTL_DISABLE);
