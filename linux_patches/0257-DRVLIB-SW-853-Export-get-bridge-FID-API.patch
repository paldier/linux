From 9994a6e75b8856f33728635361d9f69f1c707e05 Mon Sep 17 00:00:00 2001
From: Rekha Eswaran <rekha.eswaran@intel.com>
Date: Fri, 24 Aug 2018 12:44:56 +0800
Subject: [PATCH] DRVLIB_SW-853 Export get bridge FID API

---
 drivers/net/ethernet/lantiq/datapath/datapath_swdev.c |  1 +
 drivers/net/ethernet/lantiq/datapath/datapath_swdev.h |  1 -
 include/net/datapath_api.h                            | 10 ++++++++++
 3 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_swdev.c b/drivers/net/ethernet/lantiq/datapath/datapath_swdev.c
index 7aabed2ca367..857c94fbfc79 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_swdev.c
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_swdev.c
@@ -74,6 +74,7 @@ int dp_get_fid_by_brname(struct net_device *dev, int *inst)
 		return br_info->fid;
 	}
 }
+EXPORT_SYMBOL(dp_get_fid_by_brname);
 
 int dp_swdev_chk_bport_in_br(struct net_device *bp_dev, int bport, int inst)
 {
diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_swdev.h b/drivers/net/ethernet/lantiq/datapath/datapath_swdev.h
index 2aaf94b44653..993233985948 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_swdev.h
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_swdev.h
@@ -63,7 +63,6 @@ int dp_swdev_bridge_id_entry_free(int instance);
 int dp_swdev_bridge_id_entry_init(void);
 struct br_info *dp_swdev_bridge_entry_lookup(char *br_name);
 int dp_swdev_chk_bport_in_br(struct net_device *bp_dev, int bport, int inst);
-int dp_get_fid_by_brname(struct net_device *dev, int *inst);
 u16 crc_cal(const u8 *data, u16 len);
 u16 dp_swdev_cal_hash(u8 *dev_name);
 void dp_switchdev_exit(void);
diff --git a/include/net/datapath_api.h b/include/net/datapath_api.h
index b94d798b9314..179c58cbf6e5 100644
--- a/include/net/datapath_api.h
+++ b/include/net/datapath_api.h
@@ -1263,5 +1263,15 @@ int dp_free_buffer(int inst, struct dp_buffer *buffer, u32 flag);
  */
 int dp_dma_chan_irq_rx_enable(int inst, struct dp_dma_ch *ch, int flag);
 
+/*!
+ *@brief Datapath Swdev API to get FID from bridge name
+ *@param[in] dev: network device pointer
+ *@param[out] inst: DP instance ID
+ *@return Returns GSWIP bridge id i.e. FID
+ */
+#if IS_ENABLED(CONFIG_LTQ_DATAPATH_SWITCHDEV)
+int dp_get_fid_by_brname(struct net_device *dev, int *inst);
+#endif
+
 #endif /*DATAPATH_API_H */
 
