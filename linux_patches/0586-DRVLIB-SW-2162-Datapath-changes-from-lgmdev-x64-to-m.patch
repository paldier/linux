From f13fae8692fbb551227ed8f01986ab93f1a1ad2a Mon Sep 17 00:00:00 2001
From: Rekha Eswaran <rekha.eswaran@intel.com>
Date: Tue, 23 Apr 2019 17:15:45 +0800
Subject: [PATCH] DRVLIB_SW-2162 - Datapath changes from lgmdev x64 to master
 branch review comments addressed

---
 drivers/net/ethernet/lantiq/datapath/Kconfig         | 19 +++++--------------
 drivers/net/ethernet/lantiq/datapath/datapath_soc.c  |  2 +-
 drivers/net/ethernet/lantiq/datapath/gswip30/Kconfig |  4 ++--
 drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig |  6 +++---
 4 files changed, 11 insertions(+), 20 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/datapath/Kconfig b/drivers/net/ethernet/lantiq/datapath/Kconfig
index 432e877ca187..372f74ab3010 100644
--- a/drivers/net/ethernet/lantiq/datapath/Kconfig
+++ b/drivers/net/ethernet/lantiq/datapath/Kconfig
@@ -61,6 +61,7 @@ config INTEL_DATAPATH_DBG_PROTOCOL_PARSE
 	  Datapath Debug Tool for hw checksum's protocol parsing
 	  Only for debugging purpose
 	  By default it should be disabled.
+
 config INTEL_DATAPATH_EXTRA_DEBUG
 	bool "extra debugging support"
 	default n
@@ -154,8 +155,8 @@ config LTQ_DATAPATH
 
 config LTQ_DATAPATH_ACA_CSUM_WORKAROUND
 	bool
-	default y
-	default LTQ_DATAPATH_ACA_CSUM_WORKAROUND
+	default n
+	default INTEL_DATAPATH_ACA_CSUM_WORKAROUND
 
 config LTQ_DATAPATH_MANUAL_PARSE
 	bool
@@ -164,22 +165,12 @@ config LTQ_DATAPATH_MANUAL_PARSE
 
 config LTQ_DATAPATH_SKB
 	bool
-	default y
+	default n
 	depends on INTEL_DATAPATH_SKB
 
-config LTQ_DATAPATH_PTP1588
-	bool
-	default y
-	depends on INTEL_DATAPATH_PTP1588
-
-config LTQ_DATAPATH_PTP1588_SW_WORKAROUND
-	bool
-	default y
-	depends on INTEL_DATAPATH_PTP1588_SW_WORKAROUND
-
 config LTQ_DATAPATH_CPUFREQ
 	bool
-	default y
+	default n
 	depends on INTEL_DATAPATH_CPUFREQ
 
 source "drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig"
diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_soc.c b/drivers/net/ethernet/lantiq/datapath/datapath_soc.c
index 1f197e19289d..bde647ba4908 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_soc.c
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_soc.c
@@ -29,7 +29,7 @@ int request_dp(u32 flag)
 	u32 mac_ifcnt = gsw_get_mac_subifcnt(0);
 
 #if IS_ENABLED(CONFIG_INTEL_DATAPATH_SIMULATE_GSWIP32) || \
-	#ifdef DP_SKB_HACK
+	defined(DP_SKB_HACK)
 	info.type = GSWIP32_TYPE;
 	info.ver = GSWIP32_VER;
 	info.ops[0] = gsw_get_swcore_ops(0);
diff --git a/drivers/net/ethernet/lantiq/datapath/gswip30/Kconfig b/drivers/net/ethernet/lantiq/datapath/gswip30/Kconfig
index 441c8a362519..60551dc9d4ed 100644
--- a/drivers/net/ethernet/lantiq/datapath/gswip30/Kconfig
+++ b/drivers/net/ethernet/lantiq/datapath/gswip30/Kconfig
@@ -18,8 +18,8 @@ config INTEL_DATAPATH_HAL_GSWIP30_MIB
 
 config INTEL_DATAPATH_MIB_TMU_MPE_MIB
         bool "Support TMU-HAL mib API and MPE_HAL mib API"
-        default y
+        default n
         depends on INTEL_DATAPATH_MIB_HAL_GSWIP30_MIB
         ---help---
-          it is to provide TMU HAL mib api
+          It is to provide TMU HAL mib api
 endif
diff --git a/drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig b/drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig
index 2b6a5bc2fb22..1b6cc558a908 100644
--- a/drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig
+++ b/drivers/net/ethernet/lantiq/datapath/gswip31/Kconfig
@@ -27,16 +27,16 @@ config INTEL_DATAPATH_DDR_SIMULATE_GSWIP31
 
 config INTEL_DATAPATH_DUMMY_QOS
 	bool "datapath dummy QOS based on slim QOS driver or real QOS API with PRX300_test API"
-	default y
+	default n
 	depends on LTQ_PPV4_QOS_SLIM || (LTQ_PPV4_QOS || LTQ_PPV4)
 
 config INTEL_DATAPATH_DUMMY_QOS_VIA_PRX300_TEST
 	bool "datapath dummy QOS via ppv4 qos driver's PRX300_test api, like slim driver"
-	default y
+	default n
 	depends on (LTQ_PPV4_QOS || LTQ_PPV4) && !LTQ_PPV4_QOS_SLIM && INTEL_DATAPATH_DUMMY_QOS
 
 config INTEL_DATAPATH_QOS_HAL
 	bool "datapath QOS hal"
-	default n
+	default y
 	depends on (LTQ_PPV4_QOS || LTQ_PPV4) && !INTEL_DATAPATH_DUMMY_QOS_VIA_PRX300_TEST
 endif
