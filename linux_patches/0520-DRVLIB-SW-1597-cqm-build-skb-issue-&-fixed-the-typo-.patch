From 51ec30c1935cbb6f9022b39477bae2acbd4736c0 Mon Sep 17 00:00:00 2001
From: arathinx <ayyappanx.rathinam@intel.com>
Date: Fri, 15 Mar 2019 16:53:42 +0800
Subject: [PATCH] DRVLIB_SW-1597: cqm-build-skb-issue & fixed the typo mistake
 and one warning

---
 drivers/net/ethernet/lantiq/cqm/grx500/cbm.c | 2 +-
 drivers/net/ethernet/lantiq/cqm/prx300/cqm.c | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/cqm/grx500/cbm.c b/drivers/net/ethernet/lantiq/cqm/grx500/cbm.c
index 09fa05a19733..2e1e0a8f49e0 100644
--- a/drivers/net/ethernet/lantiq/cqm/grx500/cbm.c
+++ b/drivers/net/ethernet/lantiq/cqm/grx500/cbm.c
@@ -752,7 +752,7 @@ void *data, u32 frag_size, gfp_t priority)
 		return NULL;
 	}
 
-	return __build_skb(data, buf_size);
+	return __build_skb(data, frag_size);
 }
 
 /*FSQM initialization
diff --git a/drivers/net/ethernet/lantiq/cqm/prx300/cqm.c b/drivers/net/ethernet/lantiq/cqm/prx300/cqm.c
index 8d74b1e32b9c..2b1987072f11 100644
--- a/drivers/net/ethernet/lantiq/cqm/prx300/cqm.c
+++ b/drivers/net/ethernet/lantiq/cqm/prx300/cqm.c
@@ -121,8 +121,8 @@ static inline void cqm_populate_entry(struct cqm_pmac_port_map *local_entry,
 				      u32 flags, int *found)
 {
 	int index, idx;
-	*phys_port = cbm_port;
 	u32 port_bit;
+	*phys_port = cbm_port;
 
 	for (idx = 0; idx < MAX_PORT(flags); idx++) {
 		index = ((cbm_port + idx) / BITS_PER_LONG);
@@ -2303,9 +2303,9 @@ static struct sk_buff *build_skb_cqm(void *data, unsigned int frag_size,
 	}
 	buf_size = bm_pool_conf[pool].buf_frm_size;
 	if (frag_size > buf_size)
-		panic("Packet length exceedsf the buffer size %d %d\n",
+		panic("Packet length exceeds the buffer size %d %d\n",
 		      frag_size, buf_size);
-	return __build_skb(data + CQM_POOL_METADATA, buf_size);
+	return __build_skb(data + CQM_POOL_METADATA, frag_size);
 }
 
 static struct sk_buff *cqm_alloc_skb(unsigned int size, gfp_t priority)
