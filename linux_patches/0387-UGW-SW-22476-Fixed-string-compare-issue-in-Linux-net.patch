From b198853e2a45b7cd07691059810bc9c5a081c6bb Mon Sep 17 00:00:00 2001
From: agaraix <anath.bandux.garai@intel.com>
Date: Thu, 13 Dec 2018 12:23:20 +0530
Subject: [PATCH] UGW_SW-22476 : Fixed string compare issue in Linux net_device
 names (e.g. wlan0.0 with wlan0) and Linux module names.

---
 net/mcast_helper/mcast_helper_reg.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/net/mcast_helper/mcast_helper_reg.c b/net/mcast_helper/mcast_helper_reg.c
index 2b7cfac3ff1b..bb0cd5c394d1 100644
--- a/net/mcast_helper/mcast_helper_reg.c
+++ b/net/mcast_helper/mcast_helper_reg.c
@@ -172,8 +172,8 @@ static int mcast_helper_dereg_callback(struct net_device *netdev,
 		mc_callback_rec = list_entry(liter, MCAST_CALLBACK_t, list);
 		if (mc_callback_rec != NULL) {
 			if (mc_callback_rec->netDev->name != NULL) {
-				if (!strncmp (netdev->name, mc_callback_rec->netDev->name, strlen(mc_callback_rec->netDev->name))) {
-					if (!strncmp (modName->name, mc_callback_rec->modName->name, strlen(mc_callback_rec->netDev->name))) {
+				if (!strncmp (netdev->name, mc_callback_rec->netDev->name, IFNAMSIZ)) {
+					if (!strncmp (modName->name, mc_callback_rec->modName->name, MODULE_NAME_LEN)) {
 						list_del(&mc_callback_rec->list);
 						kfree(mc_callback_rec);
 						if ((flags & LTQ_MC_F_FW_RESET) == LTQ_MC_F_FW_RESET)
