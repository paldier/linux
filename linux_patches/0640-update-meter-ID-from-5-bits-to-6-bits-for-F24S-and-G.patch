From f6681771a38c57ed943785771c6b24403b0268da Mon Sep 17 00:00:00 2001
From: Xu Liang <liang.xu@intel.com>
Date: Fri, 14 Jun 2019 11:22:48 +0800
Subject: [PATCH] update meter ID from 5 bits to 6 bits for F24S and GRX500

---
 drivers/net/ethernet/lantiq/switch-api/gsw_flow_pce.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/switch-api/gsw_flow_pce.c b/drivers/net/ethernet/lantiq/switch-api/gsw_flow_pce.c
index ddd7dad6c9ea..083c843af551 100644
--- a/drivers/net/ethernet/lantiq/switch-api/gsw_flow_pce.c
+++ b/drivers/net/ethernet/lantiq/switch-api/gsw_flow_pce.c
@@ -2181,7 +2181,7 @@ int pce_rule_read(void *cdev, ltq_pce_table_t *pthandle, GSW_PCE_rule_t *parm)
 				break;
 			}
 
-			parm->action.nMeterId = ptbl.val[3] & 0x1F;
+			parm->action.nMeterId = ptbl.val[3] & 0x3F;
 		}
 
 		if (!((ptbl.val[3] >> 13) & 0x1))
@@ -4472,7 +4472,7 @@ int pce_rule_write(void *cdev, ltq_pce_table_t *pthandle, GSW_PCE_rule_t *parm)
 	if (IS_VRSN_NOT_31(gswdev->gipver)) {
 		if (paction->eMeterAction != GSW_PCE_ACTION_METER_DISABLE) {
 			ptbl.val[0] |= (1 << 11);
-			ptbl.val[3] |= (paction->nMeterId & 0x1F);
+			ptbl.val[3] |= (paction->nMeterId & 0x3F);
 
 			switch (paction->eMeterAction) {
 			case GSW_PCE_ACTION_METER_REGULAR:
