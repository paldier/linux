From e8d98b363a85fb033887a6ae8f828027c1ea6ab7 Mon Sep 17 00:00:00 2001
From: agaraix <anath.bandux.garai@intel.com>
Date: Tue, 22 Oct 2019 09:56:06 +0530
Subject: [PATCH] UGW_SW-42259 : LRO queuemap for HW Litepath device, that is
 DirectPath port.

---
 drivers/net/ethernet/lantiq/ppa/ppa_drv_wrapper.c | 11 +++++++++++
 include/net/ppa/ltq_tmu_hal_api.h                 |  2 ++
 2 files changed, 13 insertions(+)

diff --git a/drivers/net/ethernet/lantiq/ppa/ppa_drv_wrapper.c b/drivers/net/ethernet/lantiq/ppa/ppa_drv_wrapper.c
index a766edd3a0c1..80f5c17914b2 100644
--- a/drivers/net/ethernet/lantiq/ppa/ppa_drv_wrapper.c
+++ b/drivers/net/ethernet/lantiq/ppa/ppa_drv_wrapper.c
@@ -229,6 +229,9 @@ EXPORT_SYMBOL(tmu_hal_setup_dp_ingress_connectivity_hook_fn);
 int32_t (*tmu_hal_set_checksum_queue_map_hook_fn)(uint32_t pmac_port) = NULL;
 EXPORT_SYMBOL(tmu_hal_set_checksum_queue_map_hook_fn);
 
+int32_t (*tmu_hal_set_lro_queue_map_hook_fn)(uint32_t pmac_port) = NULL;
+EXPORT_SYMBOL(tmu_hal_set_lro_queue_map_hook_fn);
+
 int32_t (*mpe_hal_set_checksum_queue_map_hook_fn)(
 		uint32_t pmac_port, bool is_pmac_hdr_req) = NULL;
 EXPORT_SYMBOL(mpe_hal_set_checksum_queue_map_hook_fn);
@@ -307,6 +310,14 @@ int32_t ppa_drv_tmu_set_checksum_queue_map(uint32_t pmac_port)
 }
 EXPORT_SYMBOL(ppa_drv_tmu_set_checksum_queue_map);
 
+int32_t ppa_drv_tmu_set_lro_queue_map(uint32_t pmac_port)
+{
+	if(!tmu_hal_set_lro_queue_map_hook_fn)
+		return PPA_EINVAL;
+	return tmu_hal_set_lro_queue_map_hook_fn (pmac_port);
+}
+EXPORT_SYMBOL(ppa_drv_tmu_set_lro_queue_map);
+
 int32_t ppa_drv_mpe_set_checksum_queue_map(uint32_t pmac_port, bool is_pmac_hdr_req)
 {
 	if(!mpe_hal_set_checksum_queue_map_hook_fn)
diff --git a/include/net/ppa/ltq_tmu_hal_api.h b/include/net/ppa/ltq_tmu_hal_api.h
index 2f7797be1a66..8e0fb647f7cb 100644
--- a/include/net/ppa/ltq_tmu_hal_api.h
+++ b/include/net/ppa/ltq_tmu_hal_api.h
@@ -52,6 +52,8 @@ extern int32_t (*tmu_hal_clear_qos_mib_hook_fn)(
 #endif
 extern int (*tmu_hal_set_checksum_queue_map_hook_fn)
 		(uint32_t pmac_port);
+extern int(*tmu_hal_set_lro_queue_map_hook_fn)
+		(uint32_t pmac_port);
 extern int (*tmu_hal_remove_dp_egress_connectivity_hook_fn)
 		(struct net_device *netdev, uint32_t pmac_port);
 extern int (*tmu_hal_setup_dp_egress_connectivity_hook_fn)
