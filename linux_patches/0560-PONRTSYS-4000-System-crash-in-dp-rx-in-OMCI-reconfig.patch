From c38ba771ef10990671223f7c7e2a037d26cca1ac Mon Sep 17 00:00:00 2001
From: "Rywacki, KamilX" <kamilx.rywacki@intel.com>
Date: Wed, 17 Apr 2019 10:57:53 +0200
Subject: [PATCH] PONRTSYS-4000: System crash in dp_rx in OMCI reconfiguration

- Set DP network interface value to NULL during deregistration
---
 drivers/net/ethernet/lantiq/datapath/datapath_api.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/lantiq/datapath/datapath_api.c b/drivers/net/ethernet/lantiq/datapath/datapath_api.c
index 11eeb7a94da9..292b9d436ebe 100644
--- a/drivers/net/ethernet/lantiq/datapath/datapath_api.c
+++ b/drivers/net/ethernet/lantiq/datapath/datapath_api.c
@@ -751,6 +751,7 @@ int32_t dp_deregister_subif_private(int inst, struct module *owner,
 	memset(&port_info->subif_info[i].mib, 0,
 	       sizeof(port_info->subif_info[i].mib));
 	port_info->subif_info[i].flags = 0;
+	port_info->subif_info[i].netif = NULL;
 	port_info->num_subif--;
 	if (dp_port_prop[inst].info.subif_platform_set(inst,
 						       port_id, i,
