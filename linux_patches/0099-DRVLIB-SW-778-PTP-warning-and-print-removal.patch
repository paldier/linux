From e1a5b04102d8a3676bbe7c175962ab05d66e5d27 Mon Sep 17 00:00:00 2001
From: thampan <joby.thampan@intel.com>
Date: Fri, 29 Jun 2018 15:34:41 +0800
Subject: [PATCH] DRVLIB_SW-778: PTP warning and print removal

---
 drivers/net/ethernet/lantiq/ltq_eth_drv_xrx500.c           |  2 +-
 drivers/net/ethernet/lantiq/switch-api/mac/gswss_api.c     |  2 +-
 drivers/net/ethernet/lantiq/switch-api/mac/gswss_mac_api.c | 10 ++++++----
 drivers/net/ethernet/lantiq/switch-api/mac/xgmac_ptp.c     |  4 ++--
 4 files changed, 10 insertions(+), 8 deletions(-)

diff --git a/drivers/net/ethernet/lantiq/ltq_eth_drv_xrx500.c b/drivers/net/ethernet/lantiq/ltq_eth_drv_xrx500.c
old mode 100644
new mode 100755
index ebe5b589da3c..d0a2082beaae
--- a/drivers/net/ethernet/lantiq/ltq_eth_drv_xrx500.c
+++ b/drivers/net/ethernet/lantiq/ltq_eth_drv_xrx500.c
@@ -212,7 +212,7 @@ static int get_tsinfo(struct net_device *dev, struct ethtool_ts_info *ts_info)
 	if(ops)
 		ops->mac_get_ts_info(ops, ts_info);
 
-	return;
+	return 0;
 }
 
 /* Reset the device */
diff --git a/drivers/net/ethernet/lantiq/switch-api/mac/gswss_api.c b/drivers/net/ethernet/lantiq/switch-api/mac/gswss_api.c
old mode 100644
new mode 100755
index d1d3c05a48fa..afca2ff2e5f1
--- a/drivers/net/ethernet/lantiq/switch-api/mac/gswss_api.c
+++ b/drivers/net/ethernet/lantiq/switch-api/mac/gswss_api.c
@@ -171,7 +171,7 @@ int gswss_cfg1_1588(void *pdev, u32 trig0_sel, u32 trig1_sel, u32 sw_trig)
 
 	if (sw_trig == 0)
 		mac_printf("\tSW_TRIG: 0\n");
-	else if (trig1_sel == 1)
+	else if (sw_trig == 1)
 		mac_printf("\tSW_TRIG: 1\n");
 
 	MAC_SET_VAL(cfg0, CFG1_1588, TRIG1SEL, trig1_sel);
diff --git a/drivers/net/ethernet/lantiq/switch-api/mac/gswss_mac_api.c b/drivers/net/ethernet/lantiq/switch-api/mac/gswss_mac_api.c
index 69f1431d9f56..b79de98b7ea3 100644
--- a/drivers/net/ethernet/lantiq/switch-api/mac/gswss_mac_api.c
+++ b/drivers/net/ethernet/lantiq/switch-api/mac/gswss_mac_api.c
@@ -85,11 +85,13 @@ struct _gswss_cfg gswss_adap_cfg[] = {
 	{
 		"cfg_1588",
 		4,
-		"<ref_time "
-		"dig_time bin_time pps_sel>"
+		"<ref_time <0/1/2/3/4/5 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4>"
+		"<dig_time <0/1/2/3/4/5 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4>"
+		"<bin_time <0/1/2/3/4/5 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4>"
+		"<pps_sel <0/1/2/3/4/5/6/7 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4/PON100US/SW>"
 	},
 	{
-		"extts",
+		"aux_trig",
 		3,
 		"<trig0_sel <0/1/2/3/4/5/6/8/9/10 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4/PON100US/EXTPPS0/EXTPPS1/SW>"
 		"<trig1_sel <0/1/2/3/4/5/6/8/9/10 PON/PCIE0/PCIE1/XGMAC2/XGMAC3/XGMAC4/PON100US/EXTPPS0/EXTPPS1/SW>"
@@ -720,7 +722,7 @@ int gswss_main(u32 argc, u8 *argv[])
 					   &start_arg);
 
 			gswss_set_clkmode(adap_ops, val);
-		} else if (!strcmp(argv[start_arg], "extts")) {
+		} else if (!strcmp(argv[start_arg], "aux_trig")) {
 			start_arg++;
 
 			trig0_sel = mac_nstrtoul(argv[start_arg],
diff --git a/drivers/net/ethernet/lantiq/switch-api/mac/xgmac_ptp.c b/drivers/net/ethernet/lantiq/switch-api/mac/xgmac_ptp.c
old mode 100644
new mode 100755
index 7b20ee9224d4..2e308aef9fe4
--- a/drivers/net/ethernet/lantiq/switch-api/mac/xgmac_ptp.c
+++ b/drivers/net/ethernet/lantiq/switch-api/mac/xgmac_ptp.c
@@ -364,14 +364,14 @@ int xgmac_tx_hwts(void *pdev, struct sk_buff *skb)
 
 		/* Currently supporting only Master Mode */
 		if (IS_2STEP(pdata)) {
-			mac_printf("2-Step\n");
+			mac_dbg("2-Step\n");
 
 			/* PTP Sync if we are Master TTSE=1 OSTC=0, OSTPA=0 */
 			rec_id = fifo_entry_add(pdev, 1, 0, 0, 0, 0, 0);
 		}
 
 		if (IS_1STEP(pdata)) {
-			mac_printf("1-Step\n");
+			mac_dbg("1-Step\n");
 			ptp_loc = parse_ptp_packet(skb, &ethtype, &msg_type);
 
 			if (!ptp_loc)
